{
  "title": "Smart Cast (Умное приведение типов)",
  "content": [
    {
      "type": "text",
      "value": "**Smart Cast** — это автоматическое приведение типа переменной после проверки её типа (**is** или **!is**). Компилятор Kotlin сам выполняет приведение, избавляя вас от ручного **as** или **as?**."
    },
    {
      "type": "text",
      "value": "После проверки типа (**is**), Kotlin запомнит тип переменной в пределах области видимости и позволит использовать её как объект этого типа."
    },
    {
      "type": "code",
      "language": "kotlin",
      "value": "fun printLength(obj: Any) {\n    if (obj is String) {\n        // obj автоматически приводится к String\n        println(obj.length)  // Работает без явного приведения!\n    } else {\n        println(\"Не строка\")\n    }\n}\n\nfun main() {\n    printLength(\"Привет\")  // 6\n    printLength(42)       // Не строка\n}\n\n//Здесь obj внутри блока if (obj is String) становится типом String без необходимости писать (obj as String).length."
    },
    {
      "type": "text",
      "value": "#### Smart Cast в when"
    },
    {
      "type": "text",
      "value": "Особенно удобно использовать с when:"
    },
    {
      "type": "code",
      "language": "kotlin",
      "value": "fun describe(obj: Any): String = when (obj) {\n    is String -> \"Строка длины ${obj.length}\"  // Smart Cast к String\n    is Int -> \"Число: $obj\"                   // Smart Cast к Int\n    else -> \"Неизвестный тип\"\n}\n\nfun main() {\n    println(describe(\"Kotlin\"))  // Строка длины 6\n    println(describe(42))        // Число: 42\n}"
    },
    {
      "type": "code",
      "language": "kotlin",
      "value": "fun smartCastExample(obj: Any) {\n    when (obj) {\n        is List<*> -> println(\"Это список с ${obj.size} элементами\")  // Smart Cast к List\n        is Map<*, *> -> println(\"Это мапа: ${obj.keys}\")             // Smart Cast к Map\n        else -> println(\"Неизвестный тип\")\n    }\n}\n\nfun main() {\n    smartCastExample(listOf(1, 2, 3))  // Это список с 3 элементами\n    smartCastExample(mapOf(1 to \"one\")) // Это мапа: [1]\n}"
    }
  ]
}