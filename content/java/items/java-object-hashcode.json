{
  "title": "Метод hashCode()",
  "content": [
    {
      "type": "text",
      "value": "Метод `hashCode()` используется для генерации числового хеш-кода объекта, который необходим для корректной работы хеш-коллекций (например, **HashMap**, **HashSet**)."
    },
    {
      "type": "text",
      "value": "#### Основные правила hashCode():"
    },
    {
      "type": "text",
      "value": "1. **Контракт** с equals():\n\n\n\n- Если два объекта равны по equals(), их hashCode() **должны быть равны**.\n\n\n\n- Обратное не обязательно: разные объекты могут иметь одинаковый хеш-код (**коллизия**).\n\n\n\n2. **Оптимальность**: Хеш-функция должна равномерно распределять объекты по бакетам в хеш-таблицах.\n\n\n\n3. **Устойчивость**: Для одного и того же объекта **hashCode()** должен возвращать одно и то же значение (если данные не менялись)."
    },
    {
      "type": "text",
      "value": "В классе Object метод `hashCode()` возвращает **адрес объекта в памяти** (но это не гарантируется спецификацией)."
    },
    {
      "type": "text",
      "value": "#### Переопределение **hashCode()**"
    },
    {
      "type": "text",
      "value": "- Если переопределён `equals()`, обязательно нужно переопределить `hashCode()`, иначе коллекции (**HashMap**, **HashSet**) будут работать некорректно."
    },
    {
      "type": "code",
      "language": "java",
      "value": "class Person {\n    private String name;\n    private int age;\n\n    @Override\n    public int hashCode() {\n        int result = name != null ? name.hashCode() : 0;\n        result = 31 * result + age;  // 31 — простое число для уменьшения коллизий\n        return result;\n    }\n}"
    },
    {
      "type": "text",
      "value": "Почему 31?\n\n Простое число (уменьшает коллизии).\n\n Оптимизация: 31 * x == (x << 5) - x (JIT-компилятор заменяет умножение на сдвиг и вычитание)."
    },
    {
      "type": "text",
      "value": "- Генерация через **Objects.hash()**"
    },
    {
      "type": "code",
      "language": "java",
      "value": "@Override\npublic int hashCode() {\n    return Objects.hash(name, age);  // Автоматически считает хеш\n}"
    }
  ]
}